export const preload = async ({ id, origin }) => {
  const { views, date } = await fetch(`${origin}/api/views/${id}`).then(
    response => response.json()
  );
  return {
    layout: {
      views,
      date,
      title: 'JSXë‚˜ h(createElement) í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ê°€ìƒë”ì„ ë§Œë“œëŠ” ë°©ë²•',
      description:
        'htmlê³¼ ê°™ì€ ë§ˆí¬ì—… ë¬¸ë²•ì— ìµìˆ™í•˜ì§€ ì•Šì€ ì‚¬ëŒë“¤ì€ VanJSë¥¼ ë§Œë“  [Tao Xin]ì•„ì €ì”¨ì²˜ëŸ¼ ê·¸ëƒ¥ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì´ ë” ìì—°ìŠ¤ëŸ½ê³  ì™„ì „í•˜ê²Œ ëŠê»´ì§ˆì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.',
      openGraph: {
        title: 'JSXë‚˜ h(createElement) í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ê°€ìƒë”ì„ ë§Œë“œëŠ” ë°©ë²•',
        description:
          'htmlê³¼ ê°™ì€ ë§ˆí¬ì—… ë¬¸ë²•ì— ìµìˆ™í•˜ì§€ ì•Šì€ ì‚¬ëŒë“¤ì€ VanJSë¥¼ ë§Œë“  [Tao Xin]ì•„ì €ì”¨ì²˜ëŸ¼ ê·¸ëƒ¥ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì´ ë” ìì—°ìŠ¤ëŸ½ê³  ì™„ì „í•˜ê²Œ ëŠê»´ì§ˆì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.',
        images: [{ url: '/assets/posts/creating-virtual-dom-without-jsx-or-h-createelement.png' }],
      },
    },
  };
};

í•„ìëŠ” JSXë¥¼ ì¢‹ì•„í•©ë‹ˆë‹¤. ì‹¬ì§€ì–´ ì·¨ë¯¸ë¡œ JSX ê¸°ë°˜ì˜ ê°€ìƒë” ë¼ì´ë¸ŒëŸ¬ë¦¬ [Lithent](https://github.com/superlucky84/lithent)ë¥¼ ë§Œë“¤ê¸°ë„ í–ˆìŠµë‹ˆë‹¤.

ê°€ìƒë” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì •ë³´ë¥¼ ëª¨ìœ¼ë ¤ê³  í•œì°¸ ì›¹ì„œí•‘ì„ í•˜ë‹¤ê°€, [VanJS](https://vanjs.org/) ë¼ëŠ” í”„ë¡œì íŠ¸ë¥¼ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. VanJSì—ì„œëŠ” htmlì´ë‚˜ jsxì™€ ê°™ì€ íƒœê·¸ ì •ì˜ ìŠ¤íƒ€ì¼ë¡œ ë¬¸ì„œë¥¼ í‘œí˜„í•˜ëŠ” ëŒ€ì‹  í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì •ì˜í•©ë‹ˆë‹¤. ì•„ë˜ì²˜ëŸ¼ìš”.

```javascript
const Hello = () => div(
  p("Hello"),
  ul(
    li("World"),
    li(a({ href: "https://vanjs.org/" }, "ğŸ¦VanJS")),
  ),
)

van.add(document.body, Hello())
```

ì´ ì˜ˆì œë¥¼ ë³´ë©´ ê°€ë…ì„±ì´ í¬ê²Œ ë‚˜ì˜ì§€ ì•Šì•„ ë³´ì…ë‹ˆë‹¤.

ìƒê°í•´ ë³´ë©´ ì‚¬ëŒë“¤ì´ JSXë¥¼ ì¢‹ì•„í•˜ê³  ì¸ê¸° ìˆëŠ” ì´ìœ ëŠ”, ê¸°ì¡´ì˜ htmlë¬¸ë²•ê³¼ ë¹„ìŠ·í•˜ì—¬ ìµìˆ™í•˜ê¸° ë•Œë¬¸ì´ë¼ëŠ” ìƒê°ì„ í•´ë³´ì•˜ìŠµë‹ˆë‹¤. htmlê³¼ ê°™ì€ ë§ˆí¬ì—… ë¬¸ë²•ì— ìµìˆ™í•˜ì§€ ì•Šì€ ì‚¬ëŒë“¤ì€ VanJSë¥¼ ë§Œë“  [Tao Xin](https://vanjs.org/about)ì•„ì €ì”¨ì²˜ëŸ¼ ê·¸ëƒ¥ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì´ ë” ìì—°ìŠ¤ëŸ½ê³  ì™„ì „í•˜ê²Œ ëŠê»´ì§ˆì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.

ì €ê±¸ ë³´ê³  ì €ë„ ê°œì¸í”„ë¡œì íŠ¸ë¥¼ í•œë‹¤ë©´ ë¹„ìŠ·í•œ ë°©ì‹ìœ¼ë¡œ ë§Œë“¤ì–´ ë³´ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.

JSXë„ ì‚¬ì‹¤ì€ ì‹¤ì œ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ë˜ë„ë¡ í•˜ê¸° ìœ„í•´, ë¹Œë“œ ë‹¨ê³„ì—ì„œ hí•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€í™˜ë©ë‹ˆë‹¤.

## h í•¨ìˆ˜ì™€ì˜ ê°€ë…ì„± ë¹„êµ

ì²˜ìŒì— ë³´ì—¬ë“œë ¸ë˜ VanJsS ì˜ˆì œë¥¼ `h(createElement)` ìŠ¤íƒ€ì¼ë¡œ í•œë²ˆ ë°”ê¿”ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
h('div', null,
  h('p', null, 'Jello'),
  h('ul', null,
    h('li', null, 'World'),
    h('li', null,
      h('a', { href: 'https://vanjs.org/' }, 'ğŸ¦VanJS')
    ),
  )
)
```

Tao Xin ì•„ì €ì”¨ê°€ ìƒê°í•´ ë‚¸ ë°©ì‹ì´ ê°€ë…ì„±ì´ ë” ì¢‹ì•„ ë³´ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë‘˜ ë‹¤ ëª¨ì–‘ì€ ë¹„ìŠ·í•´ ë³´ì´ë„¤ìš”. ì œê°€ ì·¨ë¯¸ë¡œ ë§Œë“  ê°€ìƒë” ë¼ì´ë¸ŒëŸ¬ë¦¬ì— í¬ê²Œ ì–´ë µì§€ ì•Šê²Œ Tao ì•„ì €ì”¨ì˜ ë°©ì‹ì„ ì ìš©í•´ ë³¼ ìˆ˜ ìˆì„ ê±°ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. êµ¬í˜„ì´ ì–´ë µì§€ ì•Šë‹¤ë©´ ì—¬ëŸ¬ ê°€ì§€ í‘œí˜„ë°©ì‹ì„ ì œê³µí•˜ëŠ” ê²ƒë„ ë‚˜ì˜ì§€ ì•Šë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤ (ì–´ì°¨í”¼ ì‚¬ì‹¤ìƒ ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì € í˜¼ìë§Œ ì“°ê³  ì•ìœ¼ë¡œë„ ê·¸ëŸ´ ê²ƒ ê°™ìŠµë‹ˆë‹¤).

ë°”ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•´ ë´…ì‹œë‹¤.


## h í•¨ìˆ˜ ìŠ¤íƒ€ì¼ì„ í•¨ìˆ˜í˜¸ì¶œ ë°©ì‹(Tao ì•„ì €ì”¨ ìŠ¤íƒ€ì¼)ìœ¼ë¡œ ë°”ê¾¸ê¸°

ì•„ë˜ ì½”ë“œ ì˜ˆì œì²˜ëŸ¼ Proxyë¥¼ ì´ìš©í•˜ë©´ ê°ì²´ì—ì„œ ì–´ë–¤ ê°’ì„ ë¶ˆëŸ¬ì™€ë„ h í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¤ê²Œ ë©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ `fTags.div(props, â€˜childrenâ€™)` ë¥¼ ì‹¤í–‰í•˜ë©´ `h(â€˜divâ€™, props, â€˜childrenâ€™)` ì´ ì‹¤í–‰ë˜ê²Œ ë˜ëŠ” ê²ƒì´ì£ .

```javascript
import { h } from 'lithent'; // ì œê°€ ë§Œë“  ë¼ì´ë²„ë¦¬ë¦¬ì˜ h í•¨ìˆ˜

export const fTags = new Proxy(
  {},
  {
    get(_target, tagName: string) {
      return (props, ...childrens) =>
        h(tagName, props || {}, ...childrens);
    },
  }
);
```

ì‹¤ì œë¡œ ì‚¬ìš©í•  ë•ŒëŠ” ì•„ë˜ì²˜ëŸ¼ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.

```javascript
const { section, div} = fTags;

section({ className: 'section'}, 
  div(null, 'div Block'),
),
// ì‹¤ì œë¡œ ë§Œë“¤ì–´ì§€ëŠ” DOMì€ ì•„ë˜ì²˜ëŸ¼ ë˜ê² ë„¤ìš”
// <section class="section">
//   <div>div Block</div>
// </section>
```

ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ `div, p, section`íƒœê·¸ì™€ ê°™ì€ ì¼ë°˜ íƒœê·¸ë“¤ì€ ì „ë¶€ í•´ê²°ì´ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ Fragment ì»´í¬ë„ŒíŠ¸ë‚˜ ì‚¬ìš©ìê°€ ì •ì˜í•œ ì»´í¬ë„ŒíŠ¸ì˜ ê²½ìš°ì—ëŠ” ì–´ë–»ê²Œ í•¨ìˆ˜í˜¸ì¶œ ë°©ì‹ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆì„ê¹Œìš”?

ì—ë””í„°ë¥¼ ì—´ê³  ë¨¸ë¦¬ì™€ ì†ì´ ì‹œí‚¤ëŠ” ëŒ€ë¡œ ë¬´ì‘ì • ì½”ë“œë¥¼ ì‘ì„±í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.


## Fragment ì»´í¬ë„ŒíŠ¸ë¥¼ í•¨ìˆ˜í˜¸ì¶œ ë°©ì‹ìœ¼ë¡œ ë°”ê¾¸ê¸°

ë‘ë ¤ì›€ì´ ì»¸ì§€ë§Œ, ë„ˆë¬´ ê°„ë‹¨í•˜ê²Œ ëë‚¬ìŠµë‹ˆë‹¤. FragmentëŠ” ì•„ë˜ì²˜ëŸ¼ í•˜ë©´ ë©ë‹ˆë‹¤(childrenì„ ë°›ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ hí•¨ìˆ˜ë¡œ ì‹¤ì œ Fragment ì»´í¬ë„ŒíŠ¸ë¥¼ ì‹¤í–‰ì‹œì¼œ ì¤ë‹ˆë‹¤).


```javascript
export const fFragment = (...children) => {
  return h(Fragment, {}, ...children);
};
```

ì‚¬ìš©í•  ë•ŒëŠ” ì•„ë˜ì²˜ëŸ¼ ì‚¬ìš©í•˜ê²Œ ë˜ê² ë„¤ìš”.

```javascript
fFragment(
  section({ className: 'section'}, 
    div(null, 'div Block'),
  ),
  p(null, 'p Block'),
)
// <section class="section">
//   <div>div Block</div>
// </section>
// <p>p Block</p>
```

ì—¬ê¸°ê¹Œì§€ ì˜ ì½ìœ¼ì…¨ë‹¤ë©´ ì´ëŸ° ìƒê°ì´ ë“¤ ê²ë‹ˆë‹¤. â€˜ì‚¬ìš©ì ì»´í¬ë„ŒíŠ¸ë„ ë¹„ìŠ·í•œ ë°©ì‹ìœ¼ë¡œ í•˜ë©´ ë˜ê² ë„¤?â€™

ë§ìŠµë‹ˆë‹¤. ë˜‘ê°™ì´ í•˜ë©´ ë©ë‹ˆë‹¤. ì‚¬ì‹¤ ì—¬ê¸°ì„œ ë” ì½ì–´ë´¤ì ì—¬ëŸ¬ë¶„ì´ ì˜ˆìƒí•œ ê·¸ ë‚´ìš©ì¼ ê²ë‹ˆë‹¤. ê·¸ë˜ë„ ì €ëŠ” ì´ ê¸€ì„ ì“°ê³  ë§ˆë¬´ë¦¬í•˜ê¸°ë¡œ ì´ë¯¸ ê²°ì‹¬ì„ í–ˆìœ¼ë‹ˆ ëê¹Œì§€ ì¨ë³´ê² ìŠµë‹ˆë‹¤.



## ì‚¬ìš©ì ì»´í¬ë„ŒíŠ¸ë¥¼ í•¨ìˆ˜í˜¸ì¶œ ë°©ì‹ìœ¼ë¡œ ë°”ê¾¸ê¸°

ì‚¬ìš©ìê°€ ì •ì˜í•œ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë¥¼ ì•„ë˜ ì œê°€ êµ¬í˜„í•œ `fMount` í•¨ìˆ˜ì— í•œë²ˆ í†µê³¼ì‹œì¼œ ì£¼ë©´ í•¨ìˆ˜í˜¸ì¶œ ë°©ì‹ì˜ ì»´í¬ë„ŒíŠ¸ë¡œ ë³€ê²½ì‹œì¼œ ì¤ë‹ˆë‹¤.

```javascript
export const fMount = (component) => {
  return (props, ...children) => {
    return h(component, props, ...children);
  }
};
```

ì‹¤ì œë¡œ ì‚¬ìš©í•  ë•ŒëŠ” ì•„ë˜ì²˜ëŸ¼ ë˜ê² ë„¤ìš”.

```javascript
const fUserComponent = fMount(function UserComponent(props) {
    return
      (fFragment(
        section({ className: 'section'}, 
          div(null, 'div Block'),
        ),
        p(null, 'p Block'),
      )
    );
});
render(fUserComponent(), document.getElementById('root'));

// <section class="section">
//   <div>div Block</div>
// </section>
// <p>p Block</p>
```

## ë§ºìœ¼ë©°


ì œê°€ êµ¬í˜„í•œ ê°€ìƒë”ì— í•œë²ˆ ì ìš©í•´ ë´¤ëŠ”ë°ìš”([Litnet v1.9.0](https://www.npmjs.com/package/lithent)ìœ¼ë¡œ ë°°í¬í•˜ì˜€ìŠµë‹ˆë‹¤), ë‹¤ ë§Œë“¤ê³  ë³´ë‹ˆ ë‹¤ë¥¸ JSX ê¸°ë°˜ í”„ë¡œì íŠ¸ì—ë„ ì‰½ê²Œ ì ìš©í•˜ì—¬ ì‚¬ìš© ê°€ëŠ¥í•  ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“œë„¤ìš”. ì£¼ê´€ì ì¸ íŒë‹¨ì´ì§€ë§Œ ê°€ë…ì„±ë„ ìƒê°ë³´ë‹¤ ë‚˜ì˜ì§€ ì•Šê³ ìš”.

ì°¸ê³ ë¡œ ì´ ê¸€ì—ì„œ ì˜ˆì œë¡œ ë³´ì—¬ë“œë¦° ì½”ë“œëŠ” ì„¤ëª…í•˜ê¸° ì‰½ê²Œ ê°„ëµí™”í•œ ì½”ë“œì…ë‹ˆë‹¤. ì›ë³¸ ì½”ë“œëŠ” [ì—¬ê¸°](https://github.com/superlucky84/lithent/blob/master/ftags/src/index.ts)ì—ì„œ ë³¼ ìˆ˜ ìˆì–´ìš”

ëê¹Œì§€ ì½ìœ¼ì‹  ê¹€ì—, ì œê°€ ë§Œë“  [ê²½ëŸ‰ ê°€ìƒë” ë¼ì´ë¸ŒëŸ¬ë¦¬ Github](https://github.com/superlucky84/lithent)ì—ë„ í•œë²ˆ ë“¤ë¦¬ì…”ì„œ ë³„ í´ë¦­ í•œë²ˆ ë¶€íƒë“œë¦½ë‹ˆë‹¤.



































